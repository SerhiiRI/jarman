#+TITLE: Agenda
#+TODO: TOREVIEW(r) PROCESSING(p) TODO(t) PLANNED(s) | DONE(d)
#+TAGS: @Julia(j) @Aleks(a) @Serhii(s)
#+PRIORITIES: 1 3 2
#+PROPERTY: session *EL* 
#+PROPERTY: cache yes
#+ARCHIVE: %s_done::
#+STARTUP: overview

* Development
** Shortcuts
   Open link file ~C-c C-o~
   [[file:docs/page/graphics.org][Shortucts]]

** Release Roadmap
   
  #+begin_src plantuml :file issues/agenda/release-roadmap.png
    @startgantt
    scale 800 width
    Project starts 2021-10-02
    [Permission] starts 2021-10-02
    [Permission] is colored in LawnGreen/MediumSeaGreen
    [Permission] ends 2021-10-10
    [Permission] is 100% completed
    [Licenses] starts 2021-10-02
    [Licenses] is colored in LawnGreen/MediumSeaGreen
    [Licenses] ends 2021-10-24
    [GUI] starts 2021-10-02
    [GUI] is 100% completed
    [GUI] is colored in LawnGreen/MediumSeaGreen
    [GUI] ends 2021-10-25
    [Exports] is colored in LawnGreen/MediumSeaGreen
    [Exports] ends 2021-10-30
    [Exports] starts at [GUI]'s end
    [Ekka] starts at [Licenses]'s end
    [Ekka] is colored in Crimson/DarkRed
    [Ekka] ends at [Exports]'s end 
    [Unit test] as [U] starts 2021-10-14
    [Unit test] is colored in LightSeaGreen/MediumTurquoise
    [Unit test] ends 2021-10-31
    [CI/CD] as [C] lasts 2 day
    [CI/CD] is colored in LightSeaGreen/MediumTurquoise
    [C] starts at [U]'s end
    @endgantt
  #+end_src

* Frontend
  
** TODO /Bug./ Expand panels
   After expand panels initilized, icon ~+~ symbol
   but ~-~ are rendered instead.

   [[file:./issues/agenda/bug_001.png]]
   
** TODO [#2] /Rewrite/. DB Visualizer editing [0/3]            :@Aleks:@Serhii:
   DEADLINE: <2021-10-13 Wed>
   Old fns must be rewrite to new standards:
   1. [ ] Cannot edit table =view=
   2. [ ] Cannot open DB Visualizer editor. Some info must be showed, but no information and no error about that, with previosly and next too.
   3. [ ] Cannot edit metadata of table 
** TODO [#3] /Feature/. Update Manager [1/2]                           :@Aleks:
   DEADLINE: <2021-10-13 śr.>
   - [X] Related to [[#alert-boxes-replacement]], fix alert boxes.
   - [ ] Show popup with message need hard restart
** TODO [#3] /Feature/. On exit event [0/1]                    :@Aleks:@Serhii:
   - [ ] Create event when close 
     - [ ] Remove suuid /:@Serhii:/
     - [ ] Autoclose log stream's /:@Serhii:/
** PLANNED Feature. Frontend upgrade [0/4]                           :@Aleks:
*** Global shortcut (inside state) and focus pointer
    - [ ] Create storage for key-binding and fns to invoke. Functions should be from interaction.clj. Some like {~:C-r_s~ soft-restart ~:C-s~ save-changes}
*** Slider menu [0/7]
    - [ ] Move icon buttons to one transparent vertical layout - SliderBox.
    - [ ] SliderBox should be on JLayeredPane.
    - [ ] SliderBox fn hide/show - make shift animation off the screen and back. Update global state with SliderMenu occupied space. Watcher will be updating bounds and size on layouts MainMenu and FnSpace.
    - [ ] Register shortcut for hide/show in global shortcut (inside state).
    - [ ] On top mode. FnSpace will be fitted to frame and SliderMenu will be higher on layers and will cover FnSpace.
    - [ ] Default on start in ~.jarman~ configuraion - hide/show slider menu.
    - [ ] Default on start in ~.theme~ configuraion  - slider menu size.
*** Main menu [0/8]
    - [ ] Pull out main menu to MenuBox and set into JLayeredPane.
    - [ ] Watcher should changing MainMenu bounds when global state with SliderMenu occupied space will be changed. MainMenu will be properly shifted relative to the SliderMenu.
    - [ ] Hide/Show just put MainMenu into SliderMenu as icon when should be hiding and remove it from JLayeredPane. Click on icon will back MainMenu into JLayeredPane.
    - [ ] Slim right border for changing size of MainMenu. Size will be inside global state.
    - [ ] On top mode. FnSpace will be fitted to frame and MainMenu will be higher on layers and will cover FnSpace. MainMenu will be properly shifted relative to the SliderMenu.
    - [ ] Default on start in ~.jarman~ configuraion - hide/show main menu.
    - [ ] Default on start in ~.theme~ configuraion  - main menu size.
    - [ ] Add documentation how to correctly pin some components to menus. Also add more information to the Exceptions
	When i pin my panel, i get exception
	#+begin_example
	Gui view service: Cannot rerender :view-spaceWrong number of args (0) passed to: jarman.gui.gui-main-menu/default-menu-items/fn--28447
	#+end_example
	This is missunderstandable, please make throw some Exeption
*** FnSpace [0/3]
    - [ ] If on top mode will be off then FnSpace will be properly shifted relative to the SliderMenu and MainMenu.
    - [ ] If on top mode will be on then FnSpace will be always fitted to frame.
    - [ ] Watcher should changing size of FnSpace when global state with size of MainMenu or SliderMenu will be changed. FnSpace will be fitted to components inside app's frame.
** PLANNED Scroll to selected in table [0/1]                         :@Aleks:
   - [ ] Scroll to selected in table

** PLANNED /Feature/. Extension Manager [1/5]                          :@Aleks:
   - [X] Related to [[#alert-boxes-replacement]], fix alert boxes.
   - [ ] *FUTURE* Show extension file-tree. Alow editing file through the jarman [0/2]
     Related to [[#interaction-function-set]] use interaction to open file in tab
     - [ ] *FUTURE* GUI part of tree file-view for package folder
     - [ ] *FUTURE* Open file interaction
   - [ ] *FUTURE* Show whole information about package, from file /PandaPackage/ entity, when you click on
     special expand segment.
   - [ ] *FUTURE* =Enable/Disable= extension
     - [ ] *FUTURE* replace param in =.jarman=.
   - [ ] *FUTURE* Extention searching/install template, because repository we currently doesnt have
     You will managed plugins as list of PandaPackage records.
** PLANNED /Feature/. Global event on key pressed             :@Julia:@Aleks:
   - [X] Proxy for KeyEventDispacher for add global event on key pressed
   - [X] add and remove own KeyEventDispacher
   - [X] tutorial point
   - [ ] try add more KeyEventDispachers
   - [ ] lock repeating event on hold key
** PLANNED Make diagram from DB Visualiser
   - [ ] Visualize relation between tables
   - [ ] Save table location in DB visualiser into configurations
** DONE [#1] /Feature/. Interaction files [3/3]                       :@Serhii:
   CLOSED: [2021-11-07 Sun 16:45]
   :PROPERTIES:
   :CUSTOM_ID: interaction-function-set
   :END:
   - [X] =interaction.clj= [5/5]
     implement file with simple proxy function where every funciton is just wrapper
     with spec and good to read docs.
     - [X] add function =open file in tab= as arg will be file path [4/4]
       - [X] Open file
       - [X] Auto syntax by extension file
       - [X] Manual syntax set
       - [X] Change syntax in runtime with combobx
     - [X] invoke alert [info warning danger]
     - [X] Hard restart. Recompiling plugin and clean-up global state
       - [X] Write doc
     - [X] Soft restart. Reaload gui
       - [X] Write doc
     - [X] Restart. The same as hard without state.
       - [X] Write doc
   - [X] Doom debugger [4/4]
     - [X] Container on bottom
     - [X] Resize in runtime
     - [X] Open/New, Hide, Close
     - [X] Ricardo inside
   - [X] =faces.clj=
     Finish moving to new customization style
     
** DONE [#1] Frontend refactorization [7/7]
   CLOSED: [2021-11-07 Sun 16:45] DEADLINE: <2021-10-13 Wed>
*** DONE Service Periods plugins [0/2]                               :@Aleks:
    CLOSED: [2021-11-07 Sun 16:45]
**** Bugs [0/2]:
    - [ ] Service Periods and Service contract have same id in gui view service
    - [ ] Expand with selecting component loses selected data if we click close icon without choose some row
**** To fixed [0/3]:
    - [-] Expand buttons [3/5]
      - [X] Buttons must be resizable, and scaled to window width. Yes but no. Little big problem. Scrollable make problems when we resize with to smaller. It's topic for another time and task.
      - [ ] Also in future change `+/-` icons. ~What?~
      - [-] Cosmetics [1/4]
	- [X] For Enterperneur use this format style "X-kom, 400 zl", money color must be pastel green.
	- [ ] For Service Contract (contract) use this format stlye notation "30-12-2020 - 04-01-2021,  200 zl", money also in green. More readalbe will be ~2021/ 05/ 01 - 2021/ 07/ 31, 300$~
	- [ ] For Service Months (subcontract) use ths format style notation "01-01-2020 - 04-01-2021,  100 zl", money also in pastel green. More readalbe will be ~2021/ 05/ 01 - 31, 100$~
	- [ ] Discuss what and how should be displayed as info in expand btns and info bar.
      - [X] Not hide expanded button, when checkbox was clicked. Julia add coments inside plugin, about this issue (find "TODO" mark)
      - [X] make less color differencess between embaded expand buttons. Used theme face.
    - [X] Julia call it *insert-space*, is section where we adding new service contract. Rewrite whole panel, but keep logic as we create before.
    - [X] After you click on one month, you can edit all service contract month payments. You can edit, only if month wasn't payed. Rewrite Julia view, on your implementation. I think better be when all those month fields be in one line. ~You can pay for single subcontact too. One by one.~
    - [X] Prices are updated when state with checkboxes (atom :subcontracts-m) will be changed. So we have refresh checkboxes and prices in runtime.
    - [ ] Added few tests.
*** DONE Table.clj [3/4]                                             :@Aleks:
    CLOSED: [2021-11-07 Sun 16:45]
    - [X] remove 1pixel black border for right table.
    - [ ] rewrite expand panel
    - [X] make icon smaller, on 10-20%
    - [X] Move Table title to left side (nope, on center looks better), and colorize in "ocean blue" color, julia use it in login panel.
*** DONE Main view & Styling [4/4]                                   :@Aleks:
    CLOSED: [2021-11-07 Sun 16:45]
    - [X] Gui View Service [2/2]
      - [X] On tabs replace non-active tab on more brighter color.
      - [X] ON tabs replace ~x~ icon on one color.
    - [X] Default styling [4/4]
      - [X] Font. Set global Font's for all GUI components, becuase all plugins also must inherit those.
      - [X] Background. Set global background for all components.
      - [X] Foreground. Set global background for all components.
      - [X] Set default scrollbar size.
    - [X] change slider menu [3/3]
      - [X] to ~close-app~ also add ~logout~
      - [X] remove ~Change work mode~, and add optino to ~.jarman~ which will be add "key icon" to slider menu.
      - [X] Remove ~Db visuliser~ from left bar.
    - [X] Main Menu [5/5]
      - [X] Levels. Add spaces inside expand buttons groups. Expand in expand.
      - [X] Repeat colors for levels in expand button
      - [X] Change all black font's on closelly to black. Use some *dark-gray*, with blue-direction - ~#030D1C~ as example.
      - [X] Also for expand buttons use bold ubuntu fonts (looks little crappy).
      - [X] Chnage ordering items in menubar. At first place user must saw all buisness tables, and next any other *setting* or *db visualizer* etc.

*** DONE Repair expand button [2/2]                                  :@Aleks:
CLOSED: [2021-10-02 sob 11:59]
    - [X] Rainbow margin -> Space margin
    - [X] Separate last element in inside expand
*** DONE New icons as fonts [7/7]                                    :@Aleks:
CLOSED: [2021-10-02 sob 11:58]
    - [X] New fn for icon return (~gui-style/icon GoogleMaterialDesignIcons/some-icon "#000" 30)~
    - [X] Demo to quick startup in gui_style.clj
    - [X] Set new feature to alert system
    - [X] Set demo alerts (access: developer, buttons will show in main menu)
    - [X] New face for close icon, listen event mouse entered
    - [X] Set new feature to menu bars
    - [X] Set new feature to other if needed
*** DONE Alerts upgrade [5/5]                                        :@Aleks:
CLOSED: [2021-10-02 sob 11:58]
    - [X] /Feature/. Success alert type.
    - [X] /Feature/. TMP storage. invoking alerts after some event like loaded app.
    - [X] /Feature/. Add simple button to alerts insted body
    - [X] /Feature/. Add vector with fns rendering components insted body
    - [X] /Feature/. warning alert, which notify user about update
      - [X] Button with update manager invoking
      - [X] Check update
*** DONE Cooperative theme standarization [1/1]
CLOSED: [2021-10-02 sob 12:00]
    - [X] Main menu [2/2]
      - [X] Better colors for levels in expand button in ~Jarman Light~
      - [X] Better colors for levels in expand button in ~Dracula~

** DONE [#1] /Feature/. Licenses [3/3]                         :@Aleks:@Serhii:
   CLOSED: [2021-11-07 Sun 16:46] DEADLINE: <2021-10-13 śr.>
   Related to [[Register licence mechanics]] issue.
   - [X] FAQ for licence
   - [X] insert licence GUI menu
   - [X] Make template (put into some tmp file or place) [2/2]
     - [X] Alert which making hard logout from system, and inform about computer count
     - [X] Alert which inform on startup that licence is going to end
** DONE [#1] /Feature/. Create configurations panel [1/1]
   CLOSED: [2021-11-07 Sun 16:46] DEADLINE: <2021-10-13 śr.>
   - [X] Language select box
** DONE /Feature/. Jarman Theme Light Style [6/6]
   CLOSED: [2021-10-08 Fri 13:55] DEADLINE: <2021-10-08 pt.>
   - [X] rewrite styles config
   - [X] global font
   - [X] global background
   - [X] global foreground
   - [X] removing unnessesary font override
   - [X] unifing styles in UI
** DONE Switch into new language system [1/1]                        :@Aleks:
   CLOSED: [2021-10-08 Fri 13:57] DEADLINE: <2021-10-13 śr.>
   - [X] Just use new language getter functions.

** DONE /Feature/. Theme Manager [3/3]                                :@Serhii:
   CLOSED: [2021-10-02 sob 12:18] DEADLINE: <2021-10-02 sob.>
   - [X] Related to [[#alert-boxes-replacement]], fix alert boxes.
   - [X] Make refreshing for jarman, when theme was selected
   - [X] set info about selected theme into the .jarman

** DONE Debug space like doom popup but on bottom                    :@Aleks:
CLOSED: [2021-10-02 sob 12:29]
* Backend
** TODO [#1] Pizdets
   - [ ] Switching onto honey
** TODO [#2] check all steps of loading tables                      :@Serhii:
   in file view-manager.clj, markup TO DO, add messages(println), if we need
** PLANNED Service Period. sort contract list                       :@Serhii:
   - [ ] sorting contract by date
   - [ ] colorize contract by active-nonactive depend on current date
** PLANNED /Feature/. Emacs IDE split out-environment [1/2]           :@Serhii:
   - [X] Auto tail reverting logs buffer
   - [ ] Integrate local toolkit for emacs.
     - [ ] Open log buffer.
** PLANNED Ekka todo#1 chages                         :@Julia:@Aleks:@Serhii:
*** Підприємець
    -   ЄДРПОУ - 10 цифр довжина з переду нулями
    -   Форма власності - комбобокс
    -   Номер ПДВ

*** Point of sale
    -   Назва торгового обєкту

*** РРО
    -   повна назва
    -   Заводський номер замість серійний
    -   Десять цифр фіскальний номер
    -   Працює.непрацює якщо робить нарахування
    -   Версія -> Версія прошивки
    -   Ідентифікатор виробника -> Просто виробник назва
    -   Три поля модему замінити на тип зв'язку GPRS,Ethernet,Wireless.комбобокс. Якщо ГПРС то активний телефонний номер, якщо ні то дай компонент неактивним
    -   Телефонний номер не модема а РРО

*** Пломби
     -   Використана чи ні.

*** Ремонти
      -   остання датат контаркуту видалити
      -   Фіскальний номер
      -   Дата
      -   Причина розпломбування - комбо
      -   Технічна насправність  - список
      -   Характер насправності  - вибір
      -   Яка пломба ставиться   - додати
      -   Час(дата.година) розпломбування апарту

*** ДОговір сервісного обслуговування
       -   підприємець
       -   Сторона підписуванн
       -   Сторона замовник(директор)
       -   Список касових апаратів
       -   Тариф
       -   Реквізити
       -   Строк дії договору(дефолт на рік)
       -   Нарахунок по дням

*** Акт виконаних робіт
	-   створити
** PLANNED encrypt business files                              :@Serhii:
   - [ ] create crypo toolkit
   - [ ] create key-storage
** PLANNED Rewrite test for SSQL toolkit                :@Julia:@Serhii:
   Current testable API too old. API standard was reimplemented.
   And strongly need to rewrite test cases for oll things query.
** DONE [#1] Permission system                                      :@Serhii:
   CLOSED: [2021-11-07 Sun 16:48]
   - [X] Rewrie user session object
     - [X] keep licence file in session.
     - [X] Make testing on permission
   - [X] Add into /left-bar menu/, /left-menu/ functionlity that test user permission before
     render
   - [X] View plugins permission system
** DONE [#1] /Bug/. Unpin old config system                           :@Serhii:
   CLOSED: [2021-11-07 Sun 16:48]
   - [X] Rewrite database connection list.
     - [X] Implemnent datalist in .jarman
     - [X] Rewrite login panel datalist editor
   - [X] Update repository into .jarman

** DONE [#3] /Feature/. Macro for declaring some resource             :@Serhii:
   CLOSED: [2021-11-07 Sun 16:49]
   Create ~define-resource~ macro for definision of file
   #+begin_src clojure
     (define-resource jarman
       (io/file "."           ".jarman")
       (io/file env/user-home ".jarman"))
     ;;=>
     (def jarman-file-list
       (io/file "."           ".jarman")
       (io/file env/user-home ".jarman"))
     (defn get-jarman [] (first-exist jarman-dot-file-list))
   #+end_src
   - [ ] fix update manager, because it strongly depend on old variable
   - [ ] plugin manager
   - [ ] dot jarman
   - [ ] data.clj in managment
** DONE [#3] Register licence mechanics                             :@Serhii:
   CLOSED: [2021-11-07 Sun 16:49]
   - [X] Create =register-licence-file= functionality
   - [X] decrypt/uncrypt by system RSA keys
   - [X] Checking login user in system, limited by the licence
** DONE [#3] /Feature/. Rewrite plugin system                         :@Serhii:
   CLOSED: [2021-11-07 Sun 16:49] DEADLINE: <2021-09-09 Thu>
   - [X] Add ~:deps~ key into ~package~
     - [X] create package compiling sequence
   - [X] View plugin
     - [X] Registration function.
       - [X] Remove duplications of loaded plugins
   - [X] Theme plugin [4/4]
     with relation to [[themes plugin system]]
     - [X] Theme declaration
     - [X] Merge two theme face lists
     - [X] Registration function
     - [X] GUI Theme manager
   - [X] Rename PandaPackage to PandaExtension
   - [X] Languages support
     [[file:jarman/src/jarman/gui/gui_tools.clj::208][lang in system]]
     #+begin_src clojure
       ;; src/jarman/gui/gui_tools.clj:208
       (defvar selected-lang :ua)
       ;;
       (lang :accept)
       (lang :dracula :theme-name)
     #+end_src

** DONE Одужуй!                                                      :@Julia:
   CLOSED: [2021-10-01 pt. 04:49]
** DONE Move dialog plugins into the /table.clj/                       :@Julia:
   CLOSED: [2021-09-30 czw. 06:13]
** DONE defvar managment                                            :@Serhii:
   CLOSED: [2021-09-25 Sat 14:46]
   After app loading, we have some values in system variables, divided by group name,
   - [X] Allow defvar declaration for all the places
   - [X] Fix defvar spec. 
   - [X] Save config in place in =.jarman= file
   - [X] GUI for listing all registred config's variable
   - [X] Debug for all variables
   - [X] Debug for one variables
** DONE /Bug/. Throw exception when .jarman fialed                    :@Serhii:
   CLOSED: [2021-09-18 Sat 20:37]
** DONE /Feature/. Support Org file                                   :@Serhii:
   CLOSED: [2021-09-26 Sun 19:33]
   - [X] Create library for printing directly to org file [3/3]
     - [X] Printing lib
     - [X] printing by level
     - [X] Move out to different places in one moment [2/2]
       - [X] file
       - [X] print
** DONE In load circle integrate setting variable     :@Julia:@Aleks:@Serhii:
   CLOSED: [2021-09-25 Sat 18:55]
   in some load-level add manual setted variable for some systme things, that shouldn't be 
   memberd in =.jarman=. Or thay must have some deault values which be rewrited by the 
   =.jarman= loader.
   #+begin_src clojure
     ...
     (setq language-system :en)
     (setq supported-language [:en :pl :ua])
     ...
   #+end_src

* Documentations
** PLANNED [#3] create jarman manifest file                         :@Serhii:
   - Note taken on [2021-09-02 чт 19:01] 
     After making first release of Jarman and finishing plugin system write
     Manifest which must explain to us and others:
     
     - what idea of program evolution 
     - which things must be scalled, what must be classificated
        as Core and unchanged with no reason part of jarman
     - strategy and aims   

       

   
